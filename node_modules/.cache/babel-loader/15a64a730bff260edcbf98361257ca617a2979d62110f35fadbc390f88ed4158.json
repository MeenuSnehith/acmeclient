{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport router from '../router';\nimport AuthenticationService from '@/services/UserAuthenticationService';\nexport default {\n  data: () => ({\n    form: false,\n    username: null,\n    password: null,\n    passwordConfirm: null,\n    loading: false,\n    snackbar: false,\n    timeout: 2000,\n    show1: false,\n    show2: true,\n    show3: false,\n    show4: false,\n    showAlert: false,\n    alertMessage: \"\"\n  }),\n  methods: {\n    onSubmit() {\n      if (!this.form) return;\n      this.loading = true;\n      setTimeout(() => this.loading = false, 2000);\n    },\n    required(v) {\n      return !!v || 'Field is required';\n    },\n    async loginClick() {\n      try {\n        await AuthenticationService.login({\n          username: this.username,\n          password: this.password\n        }).then(response => {\n          console.log(response.statusText);\n          if (response.statusText == \"OK\") {\n            this.$store.commit('setUserName', response.data.username);\n            this.$store.commit('setPermission', response.data.permission);\n            this.$store.commit('setIsUserLoggedIn', true);\n            console.log(this.$store.state.username);\n            console.log(this.$store.state.permission);\n            console.log(this.$store.state.isUserLoggedIn);\n            this.clearFields();\n            this.snackbar = true;\n            setTimeout(() => router.push('/'), 1000);\n          }\n        });\n      } catch (err) {\n        console.log(err);\n        this.showError(err.response.data.error);\n        this.clearFields();\n      }\n    },\n    showError(errorText) {\n      this.alertMessage = errorText;\n      this.showAlert = true;\n    },\n    clearFields() {\n      this.password = \"\";\n      this.username = \"\";\n    }\n  }\n};","map":{"version":3,"names":["router","AuthenticationService","data","form","username","password","passwordConfirm","loading","snackbar","timeout","show1","show2","show3","show4","showAlert","alertMessage","methods","onSubmit","setTimeout","required","v","loginClick","login","then","response","console","log","statusText","$store","commit","permission","state","isUserLoggedIn","clearFields","push","err","showError","error","errorText"],"sources":["/Users/mahithareddyragi/Desktop/CourierSerivce/client/src/components/LoginUser.vue"],"sourcesContent":["<template>\n  <v-sheet>\n    <h1 class=\"text-center\">Login</h1>\n    <br/>\n    <v-card class=\"mx-auto px-6 py-8\" max-width=\"344\">\n      <v-form\n        v-model=\"form\"\n        @submit.prevent=\"onSubmit\"\n      >\n        <v-text-field\n          v-model=\"username\"\n          :readonly=\"loading\"\n          :rules=\"[required]\"\n          class=\"mb-2\"\n          clearable\n          label=\"Username\"\n        ></v-text-field>\n\n        <v-text-field\n          v-model=\"password\"\n          :readonly=\"loading\"\n          :rules=\"[required]\"\n          clearable\n          label=\"Password\"\n          placeholder=\"Enter your password\"\n          :append-icon=\"show1 ? 'mdi-eye' : 'mdi-eye-off'\"\n          :type=\"show1 ? 'text' : 'password'\"\n          @click:append=\"show1 = !show1\"\n        ></v-text-field>\n        \n        <br>\n        \n        <v-alert\n          variant=\"outlined\"\n          type=\"warning\"\n          prominent\n          border=\"top\"\n          value=\"passwordAlert\"\n          v-show=\"showAlert\"\n        >\n          {{alertMessage}}\n        </v-alert>\n        \n        <br/>\n\n        <v-btn\n          :disabled=\"!form\"\n          :loading=\"loading\"\n          block\n          color=\"primary\"\n          size=\"large\"\n          type=\"submit\"\n          variant=\"elevated\"\n          rounded=\"xl\"\n          @click=\"loginClick\"\n        >\n          Login\n        </v-btn>\n        <br/>\n      </v-form>\n    </v-card>\n    \n    <v-snackbar\n      v-model=\"snackbar\"\n      :timeout=\"timeout\"\n    >\n      Login Success. Please wait while redirecting...\n    </v-snackbar>\n\n  </v-sheet>\n</template>\n\n<script>\nimport router from '../router'\nimport AuthenticationService from '@/services/UserAuthenticationService'\n\n  export default {\n    data: () => ({\n      form: false,\n      username: null,\n      password: null,\n      passwordConfirm: null,\n      loading: false,\n      snackbar: false,\n      timeout: 2000,\n      show1: false,\n      show2: true,\n      show3: false,\n      show4: false,\n      showAlert: false,\n      alertMessage: \"\",\n    }),\n\n    methods: {\n      onSubmit () {\n        if (!this.form) return\n\n        this.loading = true\n\n        setTimeout(() => (this.loading = false), 2000)\n      },\n      required (v) {\n        return !!v || 'Field is required'\n      },\n      async loginClick(){\n        try{\n          await AuthenticationService.login({\n              username: this.username,\n              password: this.password\n          }).then((response)=> {\n                console.log(response.statusText)\n                if(response.statusText == \"OK\"){\n                  this.$store.commit('setUserName', response.data.username)\n                  this.$store.commit('setPermission', response.data.permission)\n                  this.$store.commit('setIsUserLoggedIn', true)\n                  console.log(this.$store.state.username)\n                  console.log(this.$store.state.permission)\n                  console.log(this.$store.state.isUserLoggedIn)\n                  this.clearFields()\n                  this.snackbar = true\n                  setTimeout(() => (router.push('/')), 1000)\n                }\n              }\n          )\n        }\n        catch(err){\n          console.log(err)\n          this.showError(err.response.data.error)\n          this.clearFields()\n        }\n      },\n      showError(errorText){\n        this.alertMessage = errorText;\n        this.showAlert = true;\n      },\n      clearFields(){\n        this.password = \"\"\n        this.username = \"\"\n      },\n    }\n  }\n\n</script>\n"],"mappings":";AAyEA,OAAOA,MAAK,MAAO,WAAU;AAC7B,OAAOC,qBAAoB,MAAO,sCAAqC;AAErE,eAAe;EACbC,IAAI,EAAEA,CAAA,MAAO;IACXC,IAAI,EAAE,KAAK;IACXC,QAAQ,EAAE,IAAI;IACdC,QAAQ,EAAE,IAAI;IACdC,eAAe,EAAE,IAAI;IACrBC,OAAO,EAAE,KAAK;IACdC,QAAQ,EAAE,KAAK;IACfC,OAAO,EAAE,IAAI;IACbC,KAAK,EAAE,KAAK;IACZC,KAAK,EAAE,IAAI;IACXC,KAAK,EAAE,KAAK;IACZC,KAAK,EAAE,KAAK;IACZC,SAAS,EAAE,KAAK;IAChBC,YAAY,EAAE;EAChB,CAAC,CAAC;EAEFC,OAAO,EAAE;IACPC,QAAOA,CAAA,EAAK;MACV,IAAI,CAAC,IAAI,CAACd,IAAI,EAAE;MAEhB,IAAI,CAACI,OAAM,GAAI,IAAG;MAElBW,UAAU,CAAC,MAAO,IAAI,CAACX,OAAM,GAAI,KAAM,EAAE,IAAI;IAC/C,CAAC;IACDY,QAAOA,CAAGC,CAAC,EAAE;MACX,OAAO,CAAC,CAACA,CAAA,IAAK,mBAAkB;IAClC,CAAC;IACD,MAAMC,UAAUA,CAAA,EAAE;MAChB,IAAG;QACD,MAAMpB,qBAAqB,CAACqB,KAAK,CAAC;UAC9BlB,QAAQ,EAAE,IAAI,CAACA,QAAQ;UACvBC,QAAQ,EAAE,IAAI,CAACA;QACnB,CAAC,CAAC,CAACkB,IAAI,CAAEC,QAAQ,IAAI;UACfC,OAAO,CAACC,GAAG,CAACF,QAAQ,CAACG,UAAU;UAC/B,IAAGH,QAAQ,CAACG,UAAS,IAAK,IAAI,EAAC;YAC7B,IAAI,CAACC,MAAM,CAACC,MAAM,CAAC,aAAa,EAAEL,QAAQ,CAACtB,IAAI,CAACE,QAAQ;YACxD,IAAI,CAACwB,MAAM,CAACC,MAAM,CAAC,eAAe,EAAEL,QAAQ,CAACtB,IAAI,CAAC4B,UAAU;YAC5D,IAAI,CAACF,MAAM,CAACC,MAAM,CAAC,mBAAmB,EAAE,IAAI;YAC5CJ,OAAO,CAACC,GAAG,CAAC,IAAI,CAACE,MAAM,CAACG,KAAK,CAAC3B,QAAQ;YACtCqB,OAAO,CAACC,GAAG,CAAC,IAAI,CAACE,MAAM,CAACG,KAAK,CAACD,UAAU;YACxCL,OAAO,CAACC,GAAG,CAAC,IAAI,CAACE,MAAM,CAACG,KAAK,CAACC,cAAc;YAC5C,IAAI,CAACC,WAAW,CAAC;YACjB,IAAI,CAACzB,QAAO,GAAI,IAAG;YACnBU,UAAU,CAAC,MAAOlB,MAAM,CAACkC,IAAI,CAAC,GAAG,CAAE,EAAE,IAAI;UAC3C;QACF,CACJ;MACF,EACA,OAAMC,GAAG,EAAC;QACRV,OAAO,CAACC,GAAG,CAACS,GAAG;QACf,IAAI,CAACC,SAAS,CAACD,GAAG,CAACX,QAAQ,CAACtB,IAAI,CAACmC,KAAK;QACtC,IAAI,CAACJ,WAAW,CAAC;MACnB;IACF,CAAC;IACDG,SAASA,CAACE,SAAS,EAAC;MAClB,IAAI,CAACvB,YAAW,GAAIuB,SAAS;MAC7B,IAAI,CAACxB,SAAQ,GAAI,IAAI;IACvB,CAAC;IACDmB,WAAWA,CAAA,EAAE;MACX,IAAI,CAAC5B,QAAO,GAAI,EAAC;MACjB,IAAI,CAACD,QAAO,GAAI,EAAC;IACnB;EACF;AACF"},"metadata":{},"sourceType":"module","externalDependencies":[]}